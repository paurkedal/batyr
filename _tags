true: bin_annot, eliom_ppx
false: package(adpkg)

# common

true: \
    package(calendar), \
    package(lwt.ppx), \
    package(lwt_react), \
    package(ppx_compose), \
    package(prime), package(prime.unstable), \
    package(ptime), \
    package(react)

# common except JS

<{lib,web/server}/*> or <on-slack/*> or <on-xmpp/*>: thread, \
    package(caqti), \
    package(caqti-dynload), \
    package(caqti-lwt), \
    package(caqti-type-calendar), \
    package(config-file), \
    package(extunix), \
    package(ppx_deriving), \
    package(ptime.clock.os), \
    package(js_of_ocaml-ppx.deriving)

# batyr-on-xmpp

<on-xmpp/*>: \
    use_batyr_lib, \
    package(erm_xmpp), \
    package(tls), \
    package(x509)

# batyr-on-slack

<on-slack/*>: \
    use_batyr_lib, \
    package(cmdliner), \
    package(conduit), \
    package(conduit-lwt), \
    package(dns-lwt-unix), \
    package(logs), \
    package(logs.fmt), \
    package(logs.lwt), \
    package(lru), \
    package(re re.pcre), \
    package(slacko), \
    package(kojson), \
    package(uri), \
    package(websocket), \
    package(websocket-lwt)

# batyr-web

<web/server/*>: \
    use_batyr_lib, \
    use_batyr_on_xmpp, \
    package(eliom.server), \
    package(yojson)

<web/client/*>: \
    package(eliom.client), \
    package(js_of_ocaml.ppx)
