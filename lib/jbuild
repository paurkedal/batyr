(jbuild_version 1)

(library
 ((name batyr_lib)
  (public_name batyr-lib)
  (wrapped false)
  (modules
   (Batyr_backoff
    Batyr_cache
    Batyr_config
    Batyr_data
    Batyr_db
    Batyr_prereq
    Batyr_search
    Batyr_search_lexer  ; internal
    Batyr_search_parser ; internal
    Batyr_search_types
    Batyr_sql           ; internal
    Batyr_version))
  (libraries
   (calendar
    caqti
    caqti-lwt
    caqti-type-calendar
    config-file
    extunix
    lwt
    lwt_react
    prime
    prime.unstable
    ptime
    ptime.clock.os
    react))
  (preprocess
   (pps (js_of_ocaml-ppx.deriving lwt.ppx ppx_compose ppx_deriving)))))

(ocamllex (batyr_search_lexer))
(ocamlyacc (batyr_search_parser))
(rule
 ((targets (batyr_search_types.ml))
  (deps (batyr_search_types.mli))
  (action (copy ${<} ${@}))))
